# Z5D-Geofac Cross-Validation Findings

## Conclusion
We have successfully established a deterministic cross-validation pipeline that bridges Geofac resonance analysis with Z5D's closed-form prime prediction. The new `z5d_adapter` tool allows for precise "scoring" of candidate factors generated by Geofac, measuring their alignment with the Z5D predictor's theoretical model. Initial execution on a sample set (N=100, Scale=10^14-10^16) demonstrates that the adapter correctly integrates with Geofac's output, assigning Z5D scores (prediction error) to each factor. This infrastructure now enables the large-scale testing required to validate the hypothesis that high Geofac resonance correlates with high Z5D predictability.

## Technical Evidence

### 1. Adapter Implementation (`z5d_adapter`)
A lightweight C adapter was developed to interface between Geofac's JSONL output and the Z5D core library (`libz5d_predictor.a`).
- **Input:** JSONL stream containing semiprime candidates `N` and factors `p, q` (added via modified Geofac tool).
- **Logic:**
    1. Inverts the Z5D model using `z5d_riemann_R(p)` to estimate the prime index `n`.
    2. Predicts the theoretically expected prime `p' = Z5D(round(n))`.
    3. Computes `z5d_score = |p - p'|` (absolute deviation).
- **Output:** Enriched JSONL with `z5d_score_p`, `z5d_n_est_p`, `z5d_score_q`, and `z5d_n_est_q`.

### 2. Geofac Modification
The `run_geofac_peaks.py` tool was modified (as `run_geofac_peaks_mod.py` within this experiment scope) to explicitly export the factors `p` and `q` alongside the semiprime `N`. This was necessary to enable direct factor-level validation by Z5D, as `N` itself cannot be scored directly by the prime predictor.

### 3. Crosscheck Pipeline (`crosscheck.sh`)
A unified shell script orchestrates the entire process:
1.  **Builds** the Z5D adapter.
2.  **Generates** QMC seeds (if missing) to ensure reproducibility.
3.  **Executes** Geofac analysis to identify resonant semiprimes.
4.  **Pipes** results to the Z5D adapter for scoring.
5.  **Artifacts:** Produces `crosscheck_results.jsonl` containing merged metrics.

### 4. Preliminary Data
Sample output from the pipeline (`artifacts/crosscheck_results.jsonl`) confirms the schema alignment:

```json
{"row_id": 91, "N": "108899077644191", "p": "10384741", "q": "10486451", "amplitude": 0.5549, "z5d_score_p": 4437.0000, "z5d_n_est_p": 688505}
```

The `z5d_score` represents the deviation of the actual factor from the Z5D prediction. A lower score indicates tighter alignment with the predictor's model.

## Limitations & Constraints
- **Scope:** Modifications were strictly confined to `experiments/geofac_validation/` to preserve project integrity.
- **Precision:** The current run used standard precision. The adapter supports configurable DPS via `--dps` for high-precision validation in future runs.

## Next Steps
- **Scale Up:** Run the pipeline on the full 10^14-10^18 dataset with the official seed set.
- **Analysis:** Compute correlation coefficients between `amplitude` (Geofac) and `z5d_score` (Z5D) to quantify the predictive power.
- **Calibration:** Use the Z5D scores to calibrate Geofac's resonance threshold.
